//Kubanychbek kyzy Aigerim
//Project 6 - Selection Sort
//CS 17
//Nov 7, 2020

program SelectionSort;
#include ("stdlib.hhf");


const 
	numelements:=18;
static
	MyArray: uns32[numelements] := [87,77,11,22,33,99,44,66,88,67,89,56,23,14,17,35,35,37];
	LastIndex : uns32;
	Index: uns32;
	i:	uns32;


begin SelectionSort;

	mov(numelements, EBX);
	mov(EBX, LastIndex);
	sub(1, LastIndex);
	stdout.put(nl, "Kubanychbek kyzy Aigerim - Project 6");
	stdout.put(nl, nl);
	stdout.put("Selection Sort, number of array elements: ", numelements, nl);
	stdout.put("Original array elements: ", nl);

	mov(0,EBX);
WhileLoop0:
	cmp(EBX, numelements);
	jnb EndWhileLoop0;
	stdout.puti32Size(MyArray[EBX*4], 4, ' ');	//printing original array elements
	inc(EBX);
	jmp WhileLoop0;
EndWhileLoop0:
	stdout.put(nl, nl, nl);
	stdout.put("Sorting...", nl);

//--------beginning of the outer most while loop--------

WhileLoop1: 	
	CMP(LastIndex,0);
	JNG EndWhileLoop1;
	mov(0, Index);
	mov(Index, ECX); 				//copying Index to ECX register
	mov(LastIndex, EDI);

//------looping through the array to find the index of the largest number---
			
	mov(0, EBX);
WhileLoop2:
	cmp(EBX, LastIndex);
	JNLE EndWhileLoop2;
	mov(MyArray[EBX*4], EAX); 			// EAX = MyArray[i]
	mov(MyArray[ECX*4], EDX);			// EDX = MyArray[Index]
	cmp(EDX, EAX); 					//if(EDX<EAX)
	JNL end_if;
	mov(EBX, ECX); 					//Index = i; Index is the max number
end_if:							//endif
	INC(EBX);
	JMP WhileLoop2;

//------ending loop finding the max number-----------
		
//------starting to sort, each new largest number is swapped with the last unsorted element

EndWhileLoop2:
	mov(EDI, EBX);                    		//EBX = LastIndex
	mov(MyArray[ECX*4], EBP);          		//EBP = MyArray[Index]
	mov(MyArray[EDI *4], ESI);        		//ESI = MyArray[LastIndex]
	mov(ECX, EBX);                     		//EBX = Index 
	mov(ESI, MyArray[EBX*4]);         		//MyArray[Index] = MyArray[LastIndex]
	mov(EDI, EBX);                   		//EBX = LastIndex
	mov(EBP, MyArray[EBX*4]);        		//MyArray[LastIndex] = MyArray[Index]
							

//-------ending swapping (sorting)

	sub(1, LastIndex);                		//Decrementing last index
		
//-------printing the whole array each sorting loop ---------
		
	mov(0, EBX);
WhileLoop3:
	cmp(EBX, numelements);
	JNL EndWhileLoop3;
	stdout.puti32Size(MyArray[EBX*4], 4, ' ');
	inc(EBX);
	JMP WhileLoop3;
EndWhileLoop3:
	stdout.put(nl);

// -----ending printing the sorted array

	JMP WhileLoop1 ;
EndWhileLoop1:
	stdout.put(nl, nl, "Kubanychbek kyzy Aigerim - End of Project 6");
	stdout.put(nl, nl);
end SelectionSort;